(function(n){(function(n){(function t(n){if(window.jQuery&&window.Swiper&&window.FrontEnd&&window.FrontEnd.CardController&&window.FrontEnd.ListingHistoryServices){const t=12;function i(n,t){const r=n.find(".js__card");r.length<4&&(n.find(".js__go-right").hide(),n.find(".js__go-left").hide());const i=new Swiper(n.find(".swiper-container"),{slidesPerView:"auto",slidesPerGroup:3,watchSlidesVisibility:!0,navigation:{nextEl:t+" .js__go-right",prevEl:t+" .js__go-left"}});i.on("transitionStart",function(){i.isEnd?n.find(".js__card-gradient-right").hide():n.find(".js__card-gradient-right").show()});$(document).ready(function(){n.find(".js__go-right").hasClass("swiper-button-disabled")?n.find(".js__card-gradient-right").hide():n.find(".js__card-gradient-right").show()});new window.FrontEnd.CardController(n.find(".js__card"))}function r(n,t){const i=n.find(".js__card");for(let n=0;n<i.length;n++){const r=i.eq(n),u=r.find(".js__product-link-for-product-id").data("product-id");t.includes(u)||r.parent().remove()}}function u(n,i){let r=n.filter(n=>i.length==0||!i.includes(n));return r.length>t&&(r=r.slice(0,t)),{activeSuggestionProductIds:r}}function f(n){function t(){var t=$("#staticDomain").data("msvrouter")!==undefined?$("#staticDomain").data("msvrouter"):"";return new Promise(i=>{if(n.getListingRecommendationUrl&&n.getListingRecommendationParams){var r=[];for(key in n.getListingRecommendationParams)r.push(`${encodeURIComponent(key)}=${encodeURIComponent(n.getListingRecommendationParams[key])}`);$.ajax({type:"POST",url:t+n.getListingRecommendationUrl,data:n.getListingRecommendationParams}).then(n=>{i(n)})}else i("")})}return t().then(t=>{$(".js__similar-listing-recommendations").html(t);const e=!!n&&!!n.suggestionListingContainerSelector?n.suggestionListingContainerSelector:".js__similar-listing",f=$(e),s=f.find(".js__card").toArray().map(n=>$(n).find(".js__product-link-for-product-id").data("product-id")),h=(new window.FrontEnd.ListingHistoryServices).GetListingHistoryFromCache(n.getListingRecommendationParams.productId).map(n=>n.productId),o=u(s,h);o.activeSuggestionProductIds.length==0&&$(".js__similar-listing").hide();r(f,o.activeSuggestionProductIds);i(f,e);$(".js__similar-listing-recommendations").find("img").each(function(){var n=this;Common.Img.Handler.registerErrorHandler(n)})}),{}}n.SimilarListingLazy=f}else setTimeout(function(){t(n)},100)})(n.Details||(n.Details={}))})(n.Product||(n.Product={}))})(window.FrontEnd||(window.FrontEnd={}));
1