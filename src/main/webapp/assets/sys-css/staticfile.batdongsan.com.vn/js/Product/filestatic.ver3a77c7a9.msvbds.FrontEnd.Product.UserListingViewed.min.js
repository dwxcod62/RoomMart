(function(n){(function(t){t.UserListingViewed=function(t){function y(){var n=i.GetUserListingViewedFromStorage(),t;u.length>0&&n.length&&(t=(new Date).getTime(),n.forEach(function(n){var i=u.find(i=>Date.parse(n.expiredDate)>t&&n.productId===i);!!i&&i>0&&(s?w(i):b(i))}))}function st(n){var t=i.GetUserListingViewedFromStorage(),r;u.push(n);u.length>0&&t.length&&(r=(new Date).getTime(),t.forEach(function(n){var t=u.find(t=>Date.parse(n.expiredDate)>r&&n.productId===t);!!t&&t>0&&(s?w(t):b(t))}))}function p(){ht();$(et).on("click",function(){d()})}function w(n){var t=`div:not(${f}) > div${r}[prid=${n}]`,i;$(t).length>0&&$(t).addClass(nt);i=`${t} > a > div${e}`;$(i).length>0&&$(i).append(ft)}function b(n){var t=`div:not(${f}) > div${r}[prid=${n}]`,i=lt(t),u,s;$(t).length>0&&$(t).addClass(tt);u=`${t} > a > div${e} > div${g}:first`;s=`${t} > a > div${e} > span:first`;i===1&&$(u).append(o);i>1&&i<5&&$(s).append(o);i===5&&($(u).append(o),$(`div:not(${f}) > div${r}.${a}[prid=${n}] > a > div${e} > span:first`).append(o))}function ht(){var n=i.GetListingTooltip();c&&!!n&&n.enabled&&n.productId>0&&ct(n)}function k(n){var t=i.GetListingTooltip();if(!!t&&(!t.enabled||!c||t.enabled&&t.productId!==n&&t.productId>0)){d();return}t.productId===0&&(t.productId=n);i.SetListingTooltip(n,!0);return}function ct(n){var t=`div:not(${f}) > div${r}:first`;n.productId>0&&(t=`div:not(${f}) > div${r}[prid=${n.productId}]`);$(t).append(ot);$(v).show()}function d(){i.SetListingTooltip(0,!1);$(v).css({display:"none"})}function lt(n){return $(n).hasClass(ut)?$(n).hasClass(a)?5:1:$(n).hasClass(rt)?2:$(n).hasClass(it)?3:4}const i=new n.UserListingViewedService,r=".js__card",f=`.${cm.GetStyleClass("card-promote-verified")}`,e=`.${cm.GetStyleClass("card-image")}`,g=`.${cm.GetStyleClass("img-parent")}`,l=`${cm.GetStyleClass("eye-viewed-product")}`,nt=`${cm.GetStyleClass("is-viewed")}`,tt=`${cm.GetStyleClass("is-viewed-old")}`,it=`${cm.GetStyleClass("vip-silver")}`,rt=`${cm.GetStyleClass("vip-gold")}`,ut=`${cm.GetStyleClass("vip-diamond")}`,a=`${cm.GetStyleClass("vip-normal")}`,o=`<span class="${l}"><i class="${cm.GetStyleClass("icon-eyes--sm")}"></i> ÄĂ£ xem</span>`,ft=`<div class="${l}"><i class="${cm.GetStyleClass("icon-eyes--sm")}"></i> ÄĂ£ xem</div>`,et="#user-identify-listing-tooltip-btn",v="#user-identify-listing-tooltip",ot=`
    <div id="user-identify-listing-tooltip" class="js-user-identify-listing-tooltip" style="display: none">
        <div class="${cm.GetStyleClass("user-identify-listing-tooltip")}">
            <div class="corner-left">
                <div class="corner"></div>
            </div>
            <div class="info">
                <div class="wrap">
                    <div class="content">
                        Tin Ä‘Äƒng nĂ y báº¡n Ä‘Ă£ xem. HĂ£y báº¥m đŸ¤ Ä‘á»ƒ lÆ°u tin vĂ  xem láº¡i sau
                    </div>
                    <div id="user-identify-listing-tooltip-btn" class="button">
                        TĂ´i Ä‘Ă£ hiá»ƒu
                    </div>
                </div>
            </div>
        </div>
    </div>`;var h=0,u=[],c=!0,s=!1;return!t||(h=t.productId,u=t.productIds,c=t.enableToolTip,s=t.enableViewListing),function(){h>0?i.SetUserlistingViewedFromStorage(h,[]):y();$(r).on("click",function(){var n=$(this).attr("prid");k(n)});$(window).on("load",function(){p()})}(),{ShowToolTipAds:p,ShowToolTipUserIdentifyListing:k,GetUserListingViewed:y,GetUserListingViewedAds:st,EnableViewListing:s}}})(n.Product||(n.Product={}))})(window.FrontEnd||(window.FrontEnd={}));
1