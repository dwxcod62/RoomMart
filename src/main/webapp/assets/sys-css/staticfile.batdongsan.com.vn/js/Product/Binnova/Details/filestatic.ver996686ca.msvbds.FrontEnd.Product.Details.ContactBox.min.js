(function(n) {
    (function(n) {
        (function t(n) {
            window.jQuery && $.fn.fancybox ? n.ContactBox = function(n) {
                function h(n, t, i) {
                    function o(n) {
                        u.x || (u = {
                            x: n.clientX,
                            y: n.clientY
                        })
                    }

                    function f() {
                        clearTimeout(e);
                        window.addEventListener("mousemove", o)
                    }
                    var r = document.querySelector("#hiddenIframeZalo"),
                        e, u;
                    r || (r = document.createElement("iframe"), r.id = "hiddenIframeZalo", r.style.display = "none", document.body.appendChild(r));
                    e = setTimeout(function() {
                        i("Link is not supported.");
                        window.removeEventListener("blur", f)
                    }, 2500);
                    u = {};
                    window.addEventListener("blur", f);
                    window.addEventListener("focus", function s() {
                        setTimeout(function() {
                            document.hasFocus() ? t(function(n) {
                                if (!n.x) return !0;
                                var t = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth,
                                    i = 300,
                                    r = 100,
                                    u = n.x - 100 < .5 * (t + i) && n.x + 100 > .5 * (t + i),
                                    f = n.y - 40 < r && n.y + 40 > r;
                                return u && f ? "Link can be opened." : "Link is not supported."
                            }(u)) : t("Link can be opened.");
                            window.removeEventListener("focus", s);
                            window.removeEventListener("blur", f);
                            window.removeEventListener("mousemove", o)
                        }, 500)
                    }, {
                        once: !0
                    });
                    r.contentWindow.location.href = n
                }

                function v() {
                    if (localStorage) {
                        var n = localStorage.getItem(u);
                        return n ? +n : (localStorage.setItem(u, 0), 0)
                    }
                    return $(".js__contact-avatar-background-onboarding").data("max-view")
                }

                function c(n) {
                    localStorage && localStorage.setItem(u, n)
                }

                function y() {
                    var i = 20,
                        n;
                    (function u() {
                        --i;
                        window.userServices ? window.userServices.getCurrentUserInfo(function(n) {
                            n && (n.mobile && $("#txtSenderMobile").val(n.mobile), n.name && $("#txtSenderName").val(n.name), userId = n.userid)
                        }) : i >= 0 && setTimeout(u, 100)
                    })();
                    n = "Tôi quan tâm đến bất động sản này.";
                    r.name && (n += " Tên liên hệ: " + r.name);
                    $("#txtSenderContent").blur(function() {
                        $(this).val().trim() || $(this).val(n)
                    });
                    $("#txtSenderMobile").blur(function() {
                        !t.ValidateMobile($("#txtSenderMobile"))
                    });
                    $("input,textarea").blur(function() {
                        $(this).val(($(this).val() || "").trim())
                    })
                }

                function p(n) {
                    n.hasClass("tooltip") == !1 && (n.addClass("tooltip"), n.append('<dl class="tooltip-text">Đã sao chép<\/dl>'));
                    $(".tooltip-text").css("display", "none");
                    n.hasClass("tooltip") && n.children(".tooltip-text").css("display", "block").animate({
                        opacity: "1"
                    }, 1e3, "easeInOutQuint").delay(800).animate({
                        opacity: "0"
                    }, 2e3, "easeInOutQuint", function() {
                        $(this).css("display", "none")
                    })
                }

                function w() {
                    var n, t, i;
                    window.innerWidth > 1128 && $(".js__contact-box").length && (n = $(window).scrollTop(), $(".search-bar").hasClass("fix") && !$(".box-header").hasClass("fix") ? $(".js__pr-scrollbar").css("top", "56px") : $(".box-header").hasClass("fix") ? $(".js__pr-scrollbar").css("top", "118px") : $(".js__pr-scrollbar").css("top", "0"), t = $(".js__contact-box").offset().top + $(".js__contact-box").outerHeight(), i = t + 56, n < t ? ($(".js__pr-scrollbar").css("opacity", 0), $(".js__pr-scrollbar").hide(), $(".search-bar").removeClass("shadow-lv-2")) : n >= t && n <= i ? ($(".js__pr-scrollbar").show(), $(".search-bar").addClass("shadow-lv-2"), $(".js__pr-scrollbar").css("opacity", ($(window).scrollTop() - t) / 56)) : n > i && ($(".js__pr-scrollbar").show(), $(".search-bar").addClass("shadow-lv-2"), $(".js__pr-scrollbar").css("opacity", 1), f()))
                }

                function f() {
                    var n, t, i;
                    window.innerWidth > 1023 && (n = $(".js__pr-scrollbar-container").width(), t = $(".js__pr-scrollbar .js__pr-s-contact").outerWidth(!0), n > 0 && t > 0 && (i = n - t - 24, $(".js__pr-scrollbar .js__pr-s-info").css("max-width", i + "px")))
                }

                function e() {
                    var n = navigator.userAgent,
                        t = {
                            iPhone: n.match(/(iPhone)/),
                            iPod: n.match(/(iPod)/),
                            iPad: n.match(/(iPad)/),
                            blackberry: n.match(/BlackBerry/),
                            android: n.match(/Android/),
                            wphone: n.match(/windows phone/)
                        };
                    return t.android ? "Android" : t.iPhone ? "iPhone" : t.iPad ? "iPad" : t.iPod ? "iPod" : t.blackberry ? "BlackBerry" : t.wphone ? "Windows phone" : "Unknown device"
                }

                function l(n, i) {
                    var r = `
                                  <div class="sending_img">
                                      <img src="${o}/images/contacts/not-send.svg">
                                  </div>
                                  <div class="sending_code">Thất bại</div>
                                  <div class="sending_msg">${n}</div>`,
                        u;
                    i && (r = `
                                  <div class="sending_img">
                                      <img src="${o}/images/contacts/sent.svg">
                                  </div>
                                  <div class="sending_code">Gửi thành công</div>
                                  <div class="sending_msg">${n}</div>`);
                    u = {
                        classContent: `new2021 form-col-1 static`,
                        classHeader: "modal-header",
                        style: "static",
                        title: `<div class="title"></div>`,
                        content: r,
                        width: 344,
                        keepBodyScroll: !1,
                        buttons: [{
                            text: "OK",
                            id: "btnCancel",
                            "class": t.GetStyleClass("btn", "btn-pr-solid--md"),
                            eventHandle: function() {
                                t.ModalEvent($("#dialogPopup"), "hide")
                            }
                        }, ]
                    };
                    t.ShowDialog(u)
                }

                function b() {
                    grecaptcha && grecaptcha.ready(function() {
                        grecaptcha.execute(n.reCAPTCHASiteKey, {
                            action: "submit"
                        }).then(function(u) {
                            var f, o;
                            if (t.AddEventLoading($(`.js__submit-loading`)), !i) {
                                if (i = !0, f = !0, f = t.ValidateMobile($("#txtSenderMobile")), !f) {
                                    i = !1;
                                    t.RemoveEventLoading();
                                    return
                                }
                                o = e();
                                k();
                                t.AjaxWrapperWithPromise({
                                    type: "POST",
                                    url: s + n.contactToBrokerUrl,
                                    data: {
                                        type: "productcontact",
                                        emailSeller: n.emailSeller,
                                        mobileSender: $("#txtSenderMobile").val().trim(),
                                        nameSender: $("#txtSenderName").val().trim(),
                                        nameSeller: n.nameSeller,
                                        mobileSeller: n.mobileSeller,
                                        userid: n.userId,
                                        loginid: r.userid,
                                        content: $("#txtSenderContent").val().trim(),
                                        productid: n.productId,
                                        platform: "Desktop web",
                                        device: o,
                                        referrer: document.referrer,
                                        producturl: window.location.href,
                                        token: u,
                                        productType: n.productType
                                    }
                                }).then(function(n) {
                                    i = !1;
                                    n.success ? (t.ModalEvent($("#dialogPopup"), "hide"), l(`Yêu cầu của bạn đã được gửi đến người đăng tin.`, !0)) : +n.type == 0 ? t.AddErrorMessage($("#txtSenderMobile"), "Số điện thoại nhập vào không đúng.") : (t.ModalEvent($("#dialogPopup"), "hide"), l(`Lỗi hệ thống khi gửi, vui lòng thực hiện lại.`, !1));
                                    t.RemoveEventLoading()
                                }, function() {
                                    i = !1;
                                    t.RemoveEventLoading()
                                })
                            }
                        })
                    })
                }

                function k() {
                    let i = new URL(document.location).searchParams,
                        r = i.get("source"),
                        u = i.get("adid"),
                        f = $(".tracking-sponsored");
                    if (u && r && r === "ad" && f.length === 0) {
                        var t = new Image(1, 1);
                        t.src = `${n.adbutlerAPI}convtrack.spark?MID=${n.adbutlerConfig.MID}&plid=${u}`;
                        t.className = "tracking-sponsored";
                        document.body.append(t)
                    }
                }
                var t = new CommonJS.Common,
                    r = {},
                    i = !1,
                    o = $("#staticDomain").data("cssserver"),
                    u = "PA_ONBOARDING_VIEW_COUNT",
                    s = $("#staticDomain").data("msvrouter") !== undefined ? $("#staticDomain").data("msvrouter") : "";
                const a = $(".js__kyc-form-helper").data("is-kyc-gate");
                return function() {
                    $(window).scroll(function() {
                        w()
                    });
                    $(window).resize(function() {
                        f();
                        $(".re__pr-navigation-ldp").length || $(".js__pr-scrollbar").css("opacity", 0);
                        $(".search-bar").removeClass("shadow-lv-2");
                        $(".js__pr-scrollbar").hide();
                        $(window).scroll()
                    });
                    $(".js__btnSendContact").click(function(t) {
                        var i = 20;
                        (function r() {
                            --i;
                            window.userServices ? window.userServices.getCurrentUserInfo(function(i) {
                                var r;
                                i ? (r = {
                                    classModalRCB: "re__from-RCB-mode",
                                    formType: 2,
                                    elementSelector: ".js__btn-send-contact-from-contact-box",
                                    triggerType: "scrollReturn",
                                    name: $(t.target).data("kyc-name"),
                                    avatar: $(t.target).data("kyc-avatar"),
                                    messageType: 1,
                                    emailSeller: n.emailSeller,
                                    nameSeller: n.nameSeller,
                                    mobileSeller: n.mobileSeller,
                                    userId: n.userId,
                                    productId: n.productId,
                                    device: e(),
                                    platform: "Desktop web",
                                    productType: n.productType,
                                    reCAPTCHASiteKey: n.reCAPTCHASiteKey,
                                    adbutlerAPI: n.adbutlerAPI,
                                    adbutlerConfig: n.adbutlerConfig
                                }, function u() {
                                    if (window.FrontEnd && window.FrontEnd.KycFormHelper) {
                                        let n = new window.FrontEnd.KycFormHelper;
                                        n.OpenForm(r)
                                    } else setTimeout(u, 500)
                                }()) : (r = {
                                    classModalRCB: "re__from-RCB-mode",
                                    formType: 1,
                                    elementSelector: ".js__btn-send-contact-from-contact-box",
                                    triggerType: "scrollReturn",
                                    name: $(t.target).data("kyc-name"),
                                    avatar: $(t.target).data("kyc-avatar"),
                                    messageType: 1,
                                    emailSeller: n.emailSeller,
                                    nameSeller: n.nameSeller,
                                    mobileSeller: n.mobileSeller,
                                    userId: n.userId,
                                    productId: n.productId,
                                    device: e(),
                                    platform: "Desktop web",
                                    productType: n.productType,
                                    adbutlerAPI: n.adbutlerAPI,
                                    adbutlerConfig: n.adbutlerConfig
                                }, function u() {
                                    if (window.FrontEnd && window.FrontEnd.KycFormHelper) {
                                        let n = new window.FrontEnd.KycFormHelper;
                                        n.OpenForm(r)
                                    } else setTimeout(u, 500)
                                }())
                            }) : i >= 0 && setTimeout(r, 100)
                        })()
                    });
                    $(".js__kyc-send-mail-button-in-ldp").click(function(i) {
                        $(this).attr("data-click-email", !0);
                        i.preventDefault();
                        var u = $(i.target).data("kyc-name") || $(i.target).parent().data("kyc-name") || "",
                            f = $(i.target).data("kyc-avatar") || $(i.target).parent().data("kyc-avatar") || "",
                            r = {
                                elementSelector: ".js__kyc-send-mail-button-in-ldp",
                                triggerType: "click",
                                name: u,
                                avatar: f,
                                messageType: 3,
                                elementId: n.productId
                            };
                        (function e() {
                            if (window.FrontEnd && window.FrontEnd.KycFormHelper) {
                                let u = new window.FrontEnd.KycFormHelper;
                                if (window.FrontEnd && window.FrontEnd.LeadManagementServices) {
                                    let t = new window.FrontEnd.LeadManagementServices;
                                    var i = {
                                        sellerId: n.userId,
                                        productId: n.productId,
                                        productType: n.productType,
                                        leadSourcePage: t.LeadSourcePage.BDS_LISTING_DETAILS_PAGE
                                    };
                                    r.agent = i
                                }
                                u.OpenLoginGateForm(r).then(i => {
                                    if (i) {
                                        if (window.SegmentClient && n.productId && window.SegmentClient.LeadEmail(n.productId), t.CopyTextToClipboard($("#email").data("email")), window.FrontEnd && window.FrontEnd.LeadManagementServices) {
                                            var r = 20;
                                            (function u() {
                                                --r;
                                                window.userServices ? window.userServices.getCurrentUserInfo(function(t) {
                                                    if (t) {
                                                        let r = new window.FrontEnd.LeadManagementServices;
                                                        var i = {
                                                            userId: t.userid,
                                                            mobile: t.mobile,
                                                            sellerId: n.userId,
                                                            productId: n.productId,
                                                            productType: 0,
                                                            leadSourceAction: r.LeadSourceAction.EMAIL,
                                                            leadSourcePage: r.LeadSourcePage.BDS_LISTING_DETAILS_PAGE,
                                                            fromLeadType: r.FromLeadType.SendEmail
                                                        };
                                                        r.CreateLead(i)
                                                    }
                                                }) : r >= 0 && setTimeout(u, 100)
                                            })()
                                        }
                                        p($("#email"));
                                        window.open($(".js__kyc-send-mail-button-in-ldp").data("href"), "_blank")
                                    }
                                })
                            } else setTimeout(e, 500)
                        })()
                    });
                    $(".js__zalo-chat").click(function(t) {
                        t.preventDefault();
                        var i = $(t.target),
                            r = i.data("kyc-name") || i.parent().data("kyc-name") || i.parent().parent().data("kyc-name") || "",
                            u = i.data("kyc-avatar") || i.parent().data("kyc-avatar") || i.parent().parent().data("kyc-avatar") || "",
                            f = {
                                elementSelector: ".js__zalo-chat",
                                triggerType: "click",
                                name: r,
                                avatar: u,
                                messageType: 3,
                                elementId: n.productId
                            };
                        (function e() {
                            if (window.FrontEnd && window.FrontEnd.KycFormHelper) {
                                let t = new window.FrontEnd.KycFormHelper;
                                t.OpenLoginGateForm(f).then(t => {
                                    var e, r;
                                    if (t)
                                        if (window.SegmentClient && n.productId && window.SegmentClient.LeadZalo(n.productId), window.FrontEnd && window.FrontEnd.LeadManagementServices && (e = 20, function s() {
                                                --e;
                                                window.userServices ? window.userServices.getCurrentUserInfo(function(t) {
                                                    if (t) {
                                                        let r = new window.FrontEnd.LeadManagementServices;
                                                        var i = {
                                                            userId: t.userId,
                                                            mobile: t.mobile,
                                                            sellerId: n.userId,
                                                            productId: n.productId,
                                                            productType: 0,
                                                            leadSourcePage: r.LeadSourcePage.BDS_LISTING_DETAILS_PAGE,
                                                            leadSourceAction: r.LeadSourceAction.ZALO,
                                                            fromLeadType: r.FromLeadType.SendZalo
                                                        };
                                                        r.CreateLead(i)
                                                    }
                                                }) : e >= 0 && setTimeout(s, 100)
                                            }()), $(".js__zalo-chat").hasClass("js__zalo-chat-qr")) {
                                            var o = $(".js__zalo-chat.js__zalo-chat-qr"),
                                                u = o.data("qrcode"),
                                                f = o.data("href"),
                                                i = $(`a[data-href="${f}"]`);
                                            const n = navigator.userAgent.toLowerCase(),
                                                t = /iphone|ipad|ipod/.test(n),
                                                e = /android/.test(n);
                                            if (u && u != "") {
                                                let n = null;
                                                t ? (n = "zalo://qr/p/" + u, window.location.href = n) : e ? (n = "zalo://zaloapp.com/qr/p/" + u, window.location.href = n) : (r = f.replace("https://zalo.me/", ""), n = "zalo://conversation?phone=" + r, i.addClass("zalo_loading"), h(n, function() {
                                                    i.removeClass("zalo_loading")
                                                }, function() {
                                                    i.removeClass("zalo_loading");
                                                    n = "https://chat.zalo.me/?phone=" + r;
                                                    window.open(n, "_blank")
                                                }))
                                            } else {
                                                let n = f;
                                                t || e ? window.location.href = n : (r = f.replace("https://zalo.me/", ""), n = "zalo://conversation?phone=" + r, i.addClass("zalo_loading"), h(n, function() {
                                                    i.removeClass("zalo_loading")
                                                }, function() {
                                                    i.removeClass("zalo_loading");
                                                    n = "https://chat.zalo.me/?phone=" + r;
                                                    window.open(n, "_blank")
                                                }))
                                            }
                                        } else setTimeout(() => {
                                            if (document.querySelectorAll(".js__zalo-chat").length) {
                                                let n = document.querySelectorAll(".js__zalo-chat")[0].getAttribute("data-href");
                                                window.open(n, "_blank")
                                            }
                                        }, 1e3)
                                })
                            } else setTimeout(e, 500)
                        })()
                    });
                    $(".js__phone-event").click(function() {
                        if (($(this).attr("tracking-id") === "click-kyc-lead-phone-ldp" && !$(this).attr("tracking-kyc") || a === "False" && !$(this).hasClass("showHotline")) && window.FrontEnd && window.FrontEnd.LeadManagementServices) {
                            var t = 20;
                            (function i() {
                                --t;
                                window.userServices ? window.userServices.getCurrentUserInfo(function(t) {
                                    if (t) {
                                        let r = new window.FrontEnd.LeadManagementServices;
                                        var i = {
                                            userId: t.userid,
                                            mobile: t.mobile,
                                            sellerId: n.userId,
                                            productId: n.productId,
                                            productType: 0,
                                            leadSourcePage: r.LeadSourcePage.BDS_LISTING_DETAILS_PAGE,
                                            leadSourceAction: r.LeadSourceAction.PHONE_REVEAL,
                                            fromLeadType: r.FromLeadType.PhoneReveal
                                        };
                                        r.CreateLead(i)
                                    }
                                }) : t >= 0 && setTimeout(i, 100)
                            })()
                        }
                    });
                    f();
                    var i = $(".js__contact-avatar-background-onboarding").data("max-view"),
                        r = v();
                    r < i && ($(".js__contact-avatar-background-onboarding").addClass(t.GetStyleClass("show")), c(r + 1));
                    $(".js__close-pa-onboarding").click(() => {
                        $(".js__contact-avatar-background-onboarding").removeClass(t.GetStyleClass("show")), c(i)
                    })
                }(), {
                    SendRequest: function(n) {
                        b(n)
                    },
                    PopupContactEvents: y
                }
            } : setTimeout(function() {
                t(n)
            }, 100)
        })(n.Details || (n.Details = {}))
    })(n.Product || (n.Product = {}))
})(window.FrontEnd || (window.FrontEnd = {}));