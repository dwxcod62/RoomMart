/*! fancyBox v2.0.6 fancyapps.com | fancyapps.com/fancybox/#license */
(function(n, t, i, r) {
    var s = i(n),
        h = i(t),
        u = i.fancybox = function() {
            u.open.apply(this, arguments)
        },
        c = !1,
        e = t.createTouch !== r,
        o = function(n) {
            return "string" === i.type(n)
        },
        f = function(n, t) {
            return t && o(n) && 0 < n.indexOf("%") && (n = u.getViewport()[t] / 100 * parseInt(n, 10)), Math.round(n) + "px"
        };
    i.extend(u, {
        version: "2.0.5",
        defaults: {
            padding: 15,
            margin: 20,
            width: 800,
            height: 600,
            minWidth: 100,
            minHeight: 100,
            maxWidth: 9999,
            maxHeight: 9999,
            autoSize: !0,
            autoResize: !e,
            autoCenter: !e,
            fitToView: !0,
            aspectRatio: !1,
            topRatio: .5,
            fixed: !1,
            scrolling: "auto",
            wrapCSS: "",
            arrows: !0,
            closeBtn: !0,
            closeClick: !1,
            nextClick: !1,
            mouseWheel: !0,
            autoPlay: !1,
            playSpeed: 3e3,
            preload: 3,
            modal: !1,
            loop: !0,
            ajax: {
                dataType: "html",
                headers: {
                    "X-fancyBox": !0
                }
            },
            keys: {
                next: [13, 32, 34, 39, 40],
                prev: [8, 33, 37, 38],
                close: [27]
            },
            tpl: {
                wrap: '<div class="fancybox-wrap"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"><\/div><\/div><\/div><\/div>',
                image: '<img class="fancybox-image" src="{href}" alt="" />',
                iframe: '<iframe class="fancybox-iframe" name="fancybox-frame{rnd}" frameborder="0" hspace="0"' + (i.browser.msie ? ' allowtransparency="true"' : "") + "><\/iframe>",
                swf: '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="wmode" value="transparent" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{href}" /><embed src="{href}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="100%" height="100%" wmode="transparent"><\/embed><\/object>',
                error: '<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.<\/p>',
                closeBtn: '<div title="Close" class="fancybox-item fancybox-close"><\/div>',
                next: '<a title="Next" class="fancybox-nav fancybox-next"><span><\/span><\/a>',
                prev: '<a title="Previous" class="fancybox-nav fancybox-prev"><span><\/span><\/a>'
            },
            openEffect: "fade",
            openSpeed: 300,
            openEasing: "swing",
            openOpacity: !0,
            openMethod: "zoomIn",
            closeEffect: "fade",
            closeSpeed: 300,
            closeEasing: "swing",
            closeOpacity: !0,
            closeMethod: "zoomOut",
            nextEffect: "elastic",
            nextSpeed: 300,
            nextEasing: "swing",
            nextMethod: "changeIn",
            prevEffect: "elastic",
            prevSpeed: 300,
            prevEasing: "swing",
            prevMethod: "changeOut",
            helpers: {
                overlay: {
                    speedIn: 0,
                    speedOut: 300,
                    opacity: .8,
                    css: {
                        cursor: "pointer"
                    },
                    closeClick: !0
                },
                title: {
                    type: "float"
                }
            }
        },
        group: {},
        opts: {},
        coming: null,
        current: null,
        isOpen: !1,
        isOpened: !1,
        player: {
            timer: null,
            isActive: !1
        },
        ajaxLoad: null,
        imgPreload: null,
        transitions: {},
        helpers: {},
        open: function(n, t) {
            u.close(!0);
            n && !i.isArray(n) && (n = n instanceof i ? i(n).get() : [n]);
            u.isActive = !0;
            u.opts = i.extend(!0, {}, u.defaults, t);
            i.isPlainObject(t) && t.keys !== r && (u.opts.keys = t.keys ? i.extend({}, u.defaults.keys, t.keys) : !1);
            u.group = n;
            u._start(u.opts.index || 0)
        },
        cancel: function() {
            u.coming && !1 === u.trigger("onCancel") || (u.coming = null, u.hideLoading(), u.ajaxLoad && u.ajaxLoad.abort(), u.ajaxLoad = null, u.imgPreload && (u.imgPreload.onload = u.imgPreload.onabort = u.imgPreload.onerror = null))
        },
        close: function(n) {
            u.cancel();
            u.current && !1 !== u.trigger("beforeClose") && (u.unbindEvents(), !u.isOpen || n && !0 === n[0] ? (i(".fancybox-wrap").stop().trigger("onReset").remove(), u._afterZoomOut()) : (u.isOpen = u.isOpened = !1, i(".fancybox-item, .fancybox-nav").remove(), u.wrap.stop(!0).removeClass("fancybox-opened"), u.inner.css("overflow", "hidden"), u.transitions[u.current.closeMethod]()))
        },
        play: function(n) {
            var t = function() {
                    clearTimeout(u.player.timer)
                },
                r = function() {
                    t();
                    u.current && u.player.isActive && (u.player.timer = setTimeout(u.next, u.current.playSpeed))
                },
                f = function() {
                    t();
                    i("body").unbind(".player");
                    u.player.isActive = !1;
                    u.trigger("onPlayEnd")
                };
            u.player.isActive || n && !1 === n[0] ? f() : u.current && (u.current.loop || u.current.index < u.group.length - 1) && (u.player.isActive = !0, i("body").bind({
                "afterShow.player onUpdate.player": r,
                "onCancel.player beforeClose.player": f,
                "beforeLoad.player": t
            }), r(), u.trigger("onPlayStart"))
        },
        next: function() {
            u.current && u.jumpto(u.current.index + 1)
        },
        prev: function() {
            u.current && u.jumpto(u.current.index - 1)
        },
        jumpto: function(n) {
            u.current && (n = parseInt(n, 10), 1 < u.group.length && u.current.loop && (n >= u.group.length ? n = 0 : 0 > n && (n = u.group.length - 1)), u.group[n] !== r && (u.cancel(), u._start(n)))
        },
        reposition: function(n, t) {
            var i;
            u.isOpen && (i = u._getPosition(t), n && "scroll" === n.type ? (delete i.position, u.wrap.stop(!0, !0).animate(i, 200)) : u.wrap.css(i))
        },
        update: function(n) {
            u.isOpen && (c || setTimeout(function() {
                var t = u.current,
                    i = !n || n && "orientationchange" === n.type;
                c && (c = !1, t) && ((!n || "scroll" !== n.type || i) && (t.autoSize && "iframe" !== t.type && (u.inner.height("auto"), t.height = u.inner.height()), (t.autoResize || i) && u._setDimension(), t.canGrow && "iframe" !== t.type && u.inner.height("auto")), (t.autoCenter || i) && u.reposition(n), u.trigger("onUpdate"))
            }, 200), c = !0)
        },
        toggle: function() {
            u.isOpen && (u.current.fitToView = !u.current.fitToView, u.update())
        },
        hideLoading: function() {
            h.unbind("keypress.fb");
            i("#fancybox-loading").remove()
        },
        showLoading: function() {
            u.hideLoading();
            h.bind("keypress.fb", function(n) {
                27 === n.keyCode && (n.preventDefault(), u.cancel())
            });
            i('<div id="fancybox-loading"><div><\/div><\/div>').click(u.cancel).appendTo("body")
        },
        getViewport: function() {
            return {
                x: s.scrollLeft(),
                y: s.scrollTop(),
                w: e && n.innerWidth ? n.innerWidth : s.width(),
                h: e && n.innerHeight ? n.innerHeight : s.height()
            }
        },
        unbindEvents: function() {
            u.wrap && u.wrap.unbind(".fb");
            h.unbind(".fb");
            s.unbind(".fb")
        },
        bindEvents: function() {
            var n = u.current,
                t = n.keys;
            n && (s.bind("resize.fb orientationchange.fb" + (n.autoCenter && !n.fixed ? " scroll.fb" : ""), u.update), t && h.bind("keydown.fb", function(n) {
                var r;
                r = n.target || n.srcElement;
                n.ctrlKey || n.altKey || n.shiftKey || n.metaKey || r && (r.type || i(r).is("[contenteditable]")) || (r = n.keyCode, -1 < i.inArray(r, t.close) ? (u.close(), n.preventDefault()) : -1 < i.inArray(r, t.next) ? (u.next(), n.preventDefault()) : -1 < i.inArray(r, t.prev) && (u.prev(), n.preventDefault()))
            }), i.fn.mousewheel && n.mouseWheel && 1 < u.group.length && u.wrap.bind("mousewheel.fb", function(n, t) {
                var i = n.target || null;
                0 === t || i && 0 !== i.clientHeight && (i.scrollHeight !== i.clientHeight || i.scrollWidth !== i.clientWidth) || (n.preventDefault(), u[0 < t ? "prev" : "next"]())
            }))
        },
        trigger: function(n, t) {
            var f, r = t || u[-1 < i.inArray(n, ["onCancel", "beforeLoad", "afterLoad"]) ? "coming" : "current"];
            if (r) {
                if (i.isFunction(r[n]) && (f = r[n].apply(r, Array.prototype.slice.call(arguments, 1))), !1 === f) return !1;
                r.helpers && i.each(r.helpers, function(t, f) {
                    f && i.isPlainObject(u.helpers[t]) && i.isFunction(u.helpers[t][n]) && u.helpers[t][n](f, r)
                });
                i.event.trigger(n + ".fb")
            }
        },
        isImage: function(n) {
            return o(n) && n.match(/\.(jpe?g|gif|png|bmp)((\?|#).*)?$/i)
        },
        isSWF: function(n) {
            return o(n) && n.match(/\.(swf)((\?|#).*)?$/i)
        },
        _start: function(n) {
            var t = {},
                f = u.group[n] || null,
                e, r, s;
            if (f && (f.nodeType || f instanceof i) && (e = !0, i.metadata && (t = i(f).metadata())), t = i.extend(!0, {}, u.opts, {
                    index: n,
                    element: f
                }, i.isPlainObject(f) ? f : t), i.each(["href", "title", "content", "type"], function(n, r) {
                    t[r] = u.opts[r] || e && i(f).attr(r) || t[r] || null
                }), "number" == typeof t.margin && (t.margin = [t.margin, t.margin, t.margin, t.margin]), t.modal && i.extend(!0, t, {
                    closeBtn: !1,
                    closeClick: !1,
                    nextClick: !1,
                    arrows: !1,
                    mouseWheel: !1,
                    keys: null,
                    helpers: {
                        overlay: {
                            css: {
                                cursor: "auto"
                            },
                            closeClick: !1
                        }
                    }
                }), u.coming = t, !1 === u.trigger("beforeLoad")) u.coming = null;
            else {
                r = t.type;
                n = t.href || f;
                r || (e && (r = i(f).data("fancybox-type"), r || (r = (r = f.className.match(/fancybox\.(\w+)/)) ? r[1] : null)), !r && o(n) && (u.isImage(n) ? r = "image" : u.isSWF(n) ? r = "swf" : n.match(/^#/) && (r = "inline")), r || (r = e ? "inline" : "html"), t.type = r);
                "inline" === r || "html" === r ? (t.content || (t.content = "inline" === r ? i(o(n) ? n.replace(/.*(?=#[^\s]+$)/, "") : n) : f), t.content && t.content.length) || (r = null) : n || (r = null);
                "ajax" === r && o(n) && (s = n.split(/\s+/, 2), n = s.shift(), t.selector = s.shift());
                t.href = n;
                t.group = u.group;
                t.isDom = e;
                switch (r) {
                    case "image":
                        u._loadImage();
                        break;
                    case "ajax":
                        u._loadAjax();
                        break;
                    case "inline":
                    case "iframe":
                    case "swf":
                    case "html":
                        u._afterLoad();
                        break;
                    default:
                        u._error("type")
                }
            }
        },
        _error: function(n) {
            u.hideLoading();
            i.extend(u.coming, {
                type: "html",
                autoSize: !0,
                minWidth: 0,
                minHeight: 0,
                padding: 15,
                hasError: n,
                content: u.coming.tpl.error
            });
            u._afterLoad()
        },
        _loadImage: function() {
            var n = u.imgPreload = new Image;
            n.onload = function() {
                this.onload = this.onerror = null;
                u.coming.width = this.width;
                u.coming.height = this.height;
                u._afterLoad()
            };
            n.onerror = function() {
                this.onload = this.onerror = null;
                u._error("image")
            };
            n.src = u.coming.href;
            n.complete !== r && n.complete || u.showLoading()
        },
        _loadAjax: function() {
            u.showLoading();
            u.ajaxLoad = i.ajax(i.extend({}, u.coming.ajax, {
                url: u.coming.href,
                error: function(n, t) {
                    u.coming && "abort" !== t ? u._error("ajax", n) : u.hideLoading()
                },
                success: function(n, t) {
                    "success" === t && (u.coming.content = n, u._afterLoad())
                }
            }))
        },
        _preloadImages: function() {
            var r = u.group,
                f = u.current,
                o = r.length,
                n, e, t, s = Math.min(f.preload, o - 1);
            if (f.preload && !(2 > r.length))
                for (t = 1; t <= s; t += 1)(n = r[(f.index + t) % o], e = n.href || i(n).attr("href") || n, "image" === n.type || u.isImage(e)) && ((new Image).src = e)
        },
        _afterLoad: function() {
            u.hideLoading();
            !u.coming || !1 === u.trigger("afterLoad", u.current) ? u.coming = !1 : (u.isOpened ? (i(".fancybox-item, .fancybox-nav").remove(), u.wrap.stop(!0).removeClass("fancybox-opened"), u.inner.css("overflow", "hidden"), u.transitions[u.current.prevMethod]()) : (i(".fancybox-wrap").stop().trigger("onReset").remove(), u.trigger("afterClose")), u.unbindEvents(), u.isOpen = !1, u.current = u.coming, u.wrap = i(u.current.tpl.wrap).addClass("fancybox-" + (e ? "mobile" : "desktop") + " fancybox-type-" + u.current.type + " fancybox-tmp " + u.current.wrapCSS).appendTo("body"), u.skin = i(".fancybox-skin", u.wrap).css("padding", f(u.current.padding)), u.outer = i(".fancybox-outer", u.wrap), u.inner = i(".fancybox-inner", u.wrap), u._setContent())
        },
        _setContent: function() {
            var n = u.current,
                t = n.content,
                o = n.type,
                r = n.minWidth,
                s = n.minHeight,
                h = n.maxWidth,
                c = n.maxHeight;
            switch (o) {
                case "inline":
                case "ajax":
                case "html":
                    n.selector ? t = i("<div>").html(t).find(n.selector) : t instanceof i && (t.parent().hasClass("fancybox-inner") && t.parents(".fancybox-wrap").unbind("onReset"), t = t.show().detach(), i(u.wrap).bind("onReset", function() {
                        t.appendTo("body").hide()
                    }));
                    n.autoSize && (r = i('<div class="fancybox-wrap ' + u.current.wrapCSS + ' fancybox-tmp"><\/div>').appendTo("body").css({
                        minWidth: f(r, "w"),
                        minHeight: f(s, "h"),
                        maxWidth: f(h, "w"),
                        maxHeight: f(c, "h")
                    }).append(t), n.width = r.width(), n.height = r.height(), r.width(u.current.width), r.height() > n.height && (r.width(n.width + 1), n.width = r.width(), n.height = r.height()), t = r.contents().detach(), r.remove());
                    break;
                case "image":
                    t = n.tpl.image.replace("{href}", n.href);
                    n.aspectRatio = !0;
                    break;
                case "swf":
                    t = n.tpl.swf.replace(/\{width\}/g, n.width).replace(/\{height\}/g, n.height).replace(/\{href\}/g, n.href);
                    break;
                case "iframe":
                    t = i(n.tpl.iframe.replace("{rnd}", (new Date).getTime())).attr("scrolling", n.scrolling).attr("src", n.href);
                    n.scrolling = e ? "scroll" : "auto"
            }("image" === o || "swf" === o) && (n.autoSize = !1, n.scrolling = "visible");
            "iframe" === o && n.autoSize ? (u.showLoading(), u._setDimension(), u.inner.css("overflow", n.scrolling), t.bind({
                onCancel: function() {
                    i(this).unbind();
                    u._afterZoomOut()
                },
                load: function() {
                    u.hideLoading();
                    try {
                        this.contentWindow.document.location && (u.current.height = i(this).contents().find("body").height())
                    } catch (n) {
                        u.current.autoSize = !1
                    }
                    u[u.isOpen ? "_afterZoomIn" : "_beforeShow"]()
                }
            }).appendTo(u.inner)) : (u.inner.append(t), u._beforeShow())
        },
        _beforeShow: function() {
            u.coming = null;
            u.trigger("beforeShow");
            u._setDimension();
            u.wrap.hide().removeClass("fancybox-tmp");
            u.bindEvents();
            u._preloadImages();
            u.transitions[u.isOpened ? u.current.nextMethod : u.current.openMethod]()
        },
        _setDimension: function() {
            var p = u.wrap,
                w = u.inner,
                e = u.current,
                h = u.getViewport(),
                s = e.margin,
                t = 2 * e.padding,
                n = e.width,
                r = e.height,
                a = e.maxWidth + t,
                c = e.maxHeight + t,
                v = e.minWidth + t,
                y = e.minHeight + t,
                l;
            if (h.w -= s[1] + s[3], h.h -= s[0] + s[2], o(n) && 0 < n.indexOf("%") && (n = (h.w - t) * parseFloat(n) / 100), o(r) && 0 < r.indexOf("%") && (r = (h.h - t) * parseFloat(r) / 100), s = n / r, n += t, r += t, e.fitToView && (a = Math.min(h.w, a), c = Math.min(h.h, c)), e.aspectRatio ? (n > a && (n = a, r = (n - t) / s + t), r > c && (r = c, n = (r - t) * s + t), n < v && (n = v, r = (n - t) / s + t), r < y) && (r = y, n = (r - t) * s + t) : (n = Math.max(v, Math.min(n, a)), r = Math.max(y, Math.min(r, c))), n = Math.round(n), r = Math.round(r), i(p.add(w)).width("auto").height("auto"), w.width(n - t).height(r - t), p.width(n), l = p.height(), n > a || l > c)
                for (;
                    (n > a || l > c) && n > v && l > y;) r -= 10, e.aspectRatio ? (n = Math.round((r - t) * s + t), n < v && (n = v, r = (n - t) / s + t)) : n -= 10, w.width(n - t).height(r - t), p.width(n), l = p.height();
            e.dim = {
                width: f(n),
                height: f(l)
            };
            e.canGrow = e.autoSize && r > y && r < c;
            e.canShrink = !1;
            e.canExpand = !1;
            n - t < e.width || r - t < e.height ? e.canExpand = !0 : (n > h.w || l > h.h) && n > v && r > y && (e.canShrink = !0);
            u.innerSpace = l - t - w.height()
        },
        _getPosition: function(n) {
            var e = u.current,
                r = u.getViewport(),
                t = e.margin,
                o = u.wrap.width() + t[1] + t[3],
                s = u.wrap.height() + t[0] + t[2],
                i = {
                    position: "absolute",
                    top: t[0] + r.y,
                    left: t[3] + r.x
                };
            return e.autoCenter && e.fixed && !n && s <= r.h && o <= r.w && (i = {
                position: "fixed",
                top: t[0],
                left: t[3]
            }), i.top = f(Math.max(i.top, i.top + (r.h - s) * e.topRatio)), i.left = f(Math.max(i.left, i.left + .5 * (r.w - o))), i
        },
        _afterZoomIn: function() {
            var n = u.current,
                t = n ? n.scrolling : "no";
            n && (u.isOpen = u.isOpened = !0, u.wrap.addClass("fancybox-opened"), u.inner.css("overflow", "yes" === t ? "scroll" : "no" === t ? "hidden" : t), u.trigger("afterShow"), u.update(), (n.closeClick || n.nextClick) && u.inner.css("cursor", "pointer").bind("click.fb", function(t) {
                i(t.target).is("a") || i(t.target).parent().is("a") || u[n.closeClick ? "close" : "next"]()
            }), n.closeBtn && i(n.tpl.closeBtn).appendTo(u.skin).bind("click.fb", u.close), n.arrows && 1 < u.group.length && ((n.loop || 0 < n.index) && i(n.tpl.prev).appendTo(u.outer).bind("click.fb", u.prev), (n.loop || n.index < u.group.length - 1) && i(n.tpl.next).appendTo(u.outer).bind("click.fb", u.next)), u.opts.autoPlay && !u.player.isActive) && (u.opts.autoPlay = !1, u.play())
        },
        _afterZoomOut: function() {
            var n = u.current;
            u.wrap.trigger("onReset").remove();
            i.extend(u, {
                group: {},
                opts: {},
                current: null,
                isActive: !1,
                isOpened: !1,
                isOpen: !1,
                wrap: null,
                skin: null,
                outer: null,
                inner: null
            });
            u.trigger("afterClose", n)
        }
    });
    u.transitions = {
        getOrigPosition: function() {
            var n = u.current,
                o = n.element,
                e = n.padding,
                t = i(n.orig),
                r = {},
                s = 50,
                h = 50;
            return !t.length && n.isDom && i(o).is(":visible") && (t = i(o).find("img:first"), t.length || (t = i(o))), t.length ? (r = t.offset(), t.is("img") && (s = t.outerWidth(), h = t.outerHeight())) : (n = u.getViewport(), r.top = n.y + .5 * (n.h - h), r.left = n.x + .5 * (n.w - s)), {
                top: f(r.top - e),
                left: f(r.left - e),
                width: f(s + 2 * e),
                height: f(h + 2 * e)
            }
        },
        step: function(n, t) {
            var i = t.prop,
                f, r;
            ("width" === i || "height" === i) && (f = Math.ceil(n - 2 * u.current.padding), "height" === i && (r = (n - t.start) / (t.end - t.start), t.start > t.end && (r = 1 - r), f -= u.innerSpace * r), u.inner[i](f))
        },
        zoomIn: function() {
            var o = u.wrap,
                n = u.current,
                r = n.openEffect,
                f = "elastic" === r,
                t = i.extend({}, n.dim, u._getPosition(f)),
                e = i.extend({
                    opacity: 1
                }, t);
            delete e.position;
            f ? (t = this.getOrigPosition(), n.openOpacity && (t.opacity = 0), u.outer.add(u.inner).width("auto").height("auto")) : "fade" === r && (t.opacity = 0);
            o.css(t).show().animate(e, {
                duration: "none" === r ? 0 : n.openSpeed,
                easing: n.openEasing,
                step: f ? this.step : null,
                complete: u._afterZoomIn
            })
        },
        zoomOut: function() {
            var t = u.wrap,
                n = u.current,
                r = n.openEffect,
                f = "elastic" === r,
                i = {
                    opacity: 0
                };
            f && ("fixed" === t.css("position") && t.css(u._getPosition(!0)), i = this.getOrigPosition(), n.closeOpacity && (i.opacity = 0));
            t.animate(i, {
                duration: "none" === r ? 0 : n.closeSpeed,
                easing: n.closeEasing,
                step: f ? this.step : null,
                complete: u._afterZoomOut
            })
        },
        changeIn: function() {
            var o = u.wrap,
                t = u.current,
                i = t.nextEffect,
                r = "elastic" === i,
                n = u._getPosition(r),
                e = {
                    opacity: 1
                };
            n.opacity = 0;
            r && (n.top = f(parseInt(n.top, 10) - 200), e.top = "+=200px");
            o.css(n).show().animate(e, {
                duration: "none" === i ? 0 : t.nextSpeed,
                easing: t.nextEasing,
                complete: u._afterZoomIn
            })
        },
        changeOut: function() {
            var t = u.wrap,
                n = u.current,
                r = n.prevEffect,
                f = {
                    opacity: 0
                };
            t.removeClass("fancybox-opened");
            "elastic" === r && (f.top = "+=200px");
            t.animate(f, {
                duration: "none" === r ? 0 : n.prevSpeed,
                easing: n.prevEasing,
                complete: function() {
                    i(this).trigger("onReset").remove()
                }
            })
        }
    };
    u.helpers.overlay = {
        overlay: null,
        update: function() {
            var n, r;
            this.overlay.width("100%").height("100%");
            i.browser.msie || e ? (n = Math.max(t.documentElement.scrollWidth, t.body.scrollWidth), r = Math.max(t.documentElement.offsetWidth, t.body.offsetWidth), n = n < r ? s.width() : n) : n = h.width();
            this.overlay.width(n).height(h.height())
        },
        beforeShow: function(n) {
            this.overlay || (n = i.extend(!0, {}, u.defaults.helpers.overlay, n), this.overlay = i('<div id="fancybox-overlay"><\/div>').css(n.css).appendTo("body"), n.closeClick && this.overlay.bind("click.fb", u.close), u.current.fixed && !e ? this.overlay.addClass("overlay-fixed") : (this.update(), this.onUpdate = function() {
                this.update()
            }), this.overlay.fadeTo(n.speedIn, n.opacity))
        },
        afterClose: function(n) {
            this.overlay && this.overlay.fadeOut(n.speedOut || 0, function() {
                i(this).remove()
            });
            this.overlay = null
        }
    };
    u.helpers.title = {
        beforeShow: function(n) {
            var t;
            (t = u.current.title) && (t = i('<div class="fancybox-title fancybox-title-' + n.type + '-wrap">' + t + "<\/div>").appendTo("body"), "float" === n.type && (t.width(t.width()), t.wrapInner('<span class="child"><\/span>'), u.current.margin[2] += Math.abs(parseInt(t.css("margin-bottom"), 10))), t.appendTo("over" === n.type ? u.inner : "outside" === n.type ? u.wrap : u.skin))
        }
    };
    i.fn.fancybox = function(n) {
        var r = i(this),
            t = this.selector || "",
            f, e = function(e) {
                var o = this,
                    h = f,
                    s;
                e.ctrlKey || e.altKey || e.shiftKey || e.metaKey || i(o).is(".fancybox-wrap") || (e.preventDefault(), e = n.groupAttr || "data-fancybox-group", s = i(o).attr(e), s || (e = "rel", s = o[e]), s && "" !== s && "nofollow" !== s && (o = t.length ? i(t) : r, o = o.filter("[" + e + '="' + s + '"]'), h = o.index(this)), n.index = h, u.open(o, n))
            },
            n = n || {};
        return f = n.index || 0, t ? h.undelegate(t, "click.fb-start").delegate(t, "click.fb-start", e) : r.unbind("click.fb-start").bind("click.fb-start", e), this
    };
    i(t).ready(function() {
        u.defaults.fixed = i.support.fixedPosition || !(i.browser.msie && 6 >= i.browser.version) && !e
    })
})(window, document, jQuery);