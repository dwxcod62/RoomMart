(function(n) {
    function o() {
        n.addTrackingCallback(u, "impressions");
        n.addTrackingCallback(v, "unl")
    }

    function s() {
        window.dataLayer = window.dataLayer || []
    }

    function t(n) {
        s();
        window.dataLayer.push(n)
    }

    function u() {
        let i = document.querySelectorAll("[impressions]");
        if (i.length) {
            let n = [];
            for (let t = 0; t < i.length; t++) {
                let r = i[t],
                    u = JSON.parse(r.getAttribute("impressions"));
                r.removeAttribute("impressions");
                n = n.concat(u)
            }!n.length || t({
                event: "eec.impression",
                ecommerce: {
                    impressions: n
                }
            })
        }
    }

    function i(n, t, r) {
        var u, e, f;
        if (!n || !n.tagName) return "";
        if (n.tagName.toLowerCase() == "html") return "HTML";
        if (u = n.tagName, u += n.id != "" ? "#" + n.id : "", n.className)
            for (e = n.className.split(/\s/), f = 0; f < e.length; f++) e[f] && (u += "." + e[f]);
        return (r = r || 0, t != null && r >= t) ? u : i(n.parentNode, t, r + 1) + " > " + u
    }

    function h(n) {
        var f, u, e, o;
        let r = {
            event: "coreWebVitals",
            cwv_event_category: "Core Web Vitals",
            cwv_event_label: n.id,
            cwv_event_action: n.name,
            cwv_event_value: Math.round(n.name === "CLS" ? n.delta * 1e3 : n.delta)
        };
        switch (n.name) {
            case "CLS":
                if (r.cwv_event_value > 50 && !!n.entries && n.entries.length > 0) {
                    let t = null;
                    for (f = 0; f < n.entries.length; f++) u = n.entries[f], !!u.sources && u.sources.length > 0 && (e = u.sources[0], !e.node || (!t || u.value < t.value) && (t = u));
                    if (!!t) {
                        let n = {
                            value: t.value
                        };
                        o = t.sources[0];
                        n.elementSelector = i(o.node, 5);
                        r.cwv_event_cls_top_elem = n
                    }
                }
                break;
            case "LCP":
                if (!!n.entries && n.entries.length > 0) {
                    const t = n.entries[n.entries.length - 1];
                    let u = {
                        url: t.url,
                        loadTime: t.loadTime,
                        startTime: t.startTime,
                        renderTime: t.renderTime,
                        duration: t.duration
                    };
                    !t.id || (u.id = t.id);
                    !t.name || (u.name = t.name);
                    !t.element || (u.elementSelector = i(t.element, 5));
                    r.cwv_event_lcp_elem = u
                }
        }
        return c(r), t(r), window.cwv = window.cwv || {}, cwv[n.name] = {
            raw: n,
            event: r
        }, window.enableDebugLog && console.info(n.name, n, r), r
    }

    function c(n) {
        Common && Common.Domain && (n.isMobile = Common.Domain.IsMobile);
        Common && Common.PageParams && Common.PageParams.PageHint && (n.pageHint = Common.PageParams.PageHint)
    }

    function f(n) {
        n || (n = window.cwvHandler || h);
        window.enableDebugLog && console.info("webVitals is running");
        window.cwv = window.cwv || {};
        webVitals.getCLS(n);
        webVitals.getFID(n);
        webVitals.getLCP(n)
    }

    function l() {
        window.webVitals ? f() : (window.enableDebugLog && console.info("webVitals library not ready, retrying"), n.retryCwvAmount += 1, n.retryCwvAmount <= n.MAX_RETRY && setTimeout(function() {
                l()
            }, 100)),
            function() {
                var n = document.createElement("script");
                n.onload = function() {
                    f()
                };
                n.async = !0;
                n.src = "https://unpkg.com/web-vitals@3.3.2/dist/web-vitals.iife.js";
                document.body.appendChild(n)
            }()
    }

    function e(n) {
        return document.cookie.split(";").map(n => {
            const t = n.split("=");
            return {
                key: (t[0] + "").trim(),
                value: unescape(t.slice(1).join("="))
            }
        }).filter(t => !t || !t.key || !t.value || (!n || t.key.startsWith(n)))
    }

    function r(n) {
        if (!n) return null;
        const t = JSON.parse(n);
        return t ? !!t.expireDate && new Date(t.expireDate) < new Date ? null : t.value : null
    }

    function a() {
        let n = {};
        const i = "con.unl.con.",
            t = e("con.unl.");
        let u = t.find(n => n.key == "con.unl.usr.id");
        if (!!u) {
            const t = r(u.value);
            t != null && (n.userId = t)
        }
        let f = t.find(n => n.key == "con.unl.cli.id");
        if (!!f) {
            const t = r(f.value);
            t != null && (n.clientId = t)
        }
        return t.filter(n => n.key.startsWith(i)).reduce((n, t) => {
            const f = t.key.substring(i.length),
                u = r(t.value);
            return u != null && (n[f] = u), n
        }, n), n
    }

    function v() {
        if (window.unlFeatures) {
            const i = a();
            for (var n = window.unlFeatures.slice(); n.length > 0;) t({
                event: "consumer.features",
                features: n.splice(0, 25),
                context: i
            })
        }
    }
    n.addDataLayer = t;
    n.addImpressions = u;
    n.getCookies = e;
    n.retryCwvAmount = 0;
    n.MAX_RETRY = 100;
    o()
})(window.Tracking || (window.Tracking = {}));