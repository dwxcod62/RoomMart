window.FrontEnd || (window.FrontEnd = {});
FrontEnd.UserListingViewedService = function () {
  function r(n, t) {
    var i = n.getDate();
    return n.setDate(i + t), n;
  }
  function u(n, t, u, f) {
    var h = new Date().getTime(),
      s = r(new Date(), i),
      e,
      o;
    return !u && !f
      ? {
          userId: n,
          productViews: [{ productId: t, expiredDate: s.toISOString() }],
        }
      : ((e = []),
        !!u &&
          !!u.productViews &&
          u.productViews.length > 0 &&
          u.productViews.forEach(function (n) {
            Date.parse(n.expiredDate) > h && e.push(n);
          }),
        !!f &&
          !!f.productViews &&
          f.productViews.length > 0 &&
          f.productViews.forEach(function (n) {
            Date.parse(n.expiredDate) > h && e.push(n);
          }),
        (o = []),
        e.forEach(function (n) {
          o.push(n.productId);
        }),
        t > 0 && !o.includes(t)
          ? e.push({ productId: t, expiredDate: s.toISOString() })
          : t > 0 &&
            !!o.includes(t) &&
            e.forEach(function (n) {
              n.productId === t && (n.expiredDate = s.toISOString());
            }),
        { userId: n, productViews: e });
  }
  function f() {
    var t = JSON.parse(window.localStorage.getItem(n));
    return !t || !t.productViews ? [] : t.productViews;
  }
  function e(t, i) {
    var r = JSON.parse(window.localStorage.getItem(n)),
      f = u(0, t, r, i);
    window.localStorage.setItem(n, JSON.stringify(f));
  }
  function o(n, i) {
    var r = JSON.parse(window.localStorage.getItem(t));
    (r && !r.enabled) ||
      ((r = { productId: n, enabled: i }),
      window.localStorage.setItem(t, JSON.stringify(r)));
  }
  function s() {
    var n = JSON.parse(window.localStorage.getItem(t));
    return n ? n : { productId: 0, enabled: !0 };
  }
  const h = new CommonJS.Common(),
    n = "USER_LISTING_VIEWED",
    t = "USER_IDENTIFY_LISTING_TOOLTIP",
    i = 7;
  this.GetUserListingViewedFromStorage = f;
  this.SetUserlistingViewedFromStorage = e;
  this.SetListingTooltip = o;
  this.GetListingTooltip = s;
};
1;
