window.FrontEnd || (window.FrontEnd = {});
FrontEnd.ListingSearchHistoryHelper = function() {
    function n(n) {
        return n.join(";")
    }

    function t(n) {
        return n.categoryIds.length > 1 || n.districtIds.length > 1 || n.wardIds.length > 1 || n.streetIds.length > 1 || n.projectIds.length > 1 || n.roomNumbers.length > 1 || n.directions.length > 1 || n.medias.length > 1 || n.verifications && n.verifications.length > 1
    }

    function u(n) {
        return n.categoryIds.length > 1 || n.cityCode || n.districtIds.length > 0 || n.wardIds.length > 0 || n.streetIds.length > 0 || n.projectIds.length > 0 || n.areaId != null || n.minArea || n.maxArea || n.priceId != null || n.minPrice || n.maxPrice || n.roomNumbers.length > 0 || n.directions.length > 0 || n.medias.length > 0 || n.verifications && n.verifications.length > 0 || n.keyword && n.keyword.length > 0
    }

    function f(i, u, f, e, o, s, h, c, l, a, v, y, p, w) {
        let b = {
            isMultipleSearch: t(i),
            productType: {
                id: i.productType,
                label: r(document.querySelector(`.js__product-type [data-type="${i.productType}"]`).textContent.trim())
            }
        };
        return i.keyword && (b.keywork = i.keywordOrigin.trim().length > 150 ? i.keywordOrigin.trim().substring(0, 150) : i.keywordOrigin.trim()), i.categoryIds.length && (b.category = {
            id: n(i.categoryIds),
            label: u.GetCustomText(2),
            tooltip: u.GetText()
        }), i.cityCode && (b.location = {
            city: {
                code: i.cityCode,
                label: f.GetText()
            }
        }, i.districtIds.length && (b.location.district = {
            id: n(i.districtIds),
            label: e.GetText()
        }, i.wardIdsAsString && (b.location.ward = {
            id: i.wardIdsAsString,
            label: o.GetText()
        })), i.streetIdsAsString && (b.location.street = {
            id: i.streetIdsAsString,
            label: s.GetText()
        }), i.projectIdsAsString && (b.location.project = {
            id: i.projectIdsAsString,
            label: h.GetText()
        })), (i.areaId != null || i.minArea || i.maxArea) && (b.area = {
            max: i.maxArea,
            min: i.minArea,
            id: i.areaId,
            label: c.GetText()
        }), (i.priceId != null || i.minPrice || i.maxPrice) && (b.price = {
            max: i.maxPrice,
            min: i.minPrice,
            id: i.priceId,
            label: l.GetText()
        }), i.roomNumbers && i.roomNumbers.length && i.roomNumbers.join("") != "-1" && i.roomNumbers.join("") != "0" && (b.room = {
            id: i.roomNumbers.join(";"),
            label: a.GetText()
        }), i.directions && i.directions.length && i.directions.join("") != "-1" && i.directions.join("") != "0" && (b.direction = {
            id: i.directions.join(";"),
            label: v.GetText()
        }), i.medias && i.medias.length && i.medias.join("") != "-1" && i.medias.join("") != "0" && (b.media = {
            id: i.medias.join(";"),
            label: y.GetText()
        }), i.verifications && i.verifications.length && i.verifications.join("") != "-1" && i.verifications.join("") != "0" && (b.verification = {
            id: i.verifications.join(";"),
            label: p.GetText()
        }), i.stages && i.stages.length && w && (b.stage = {
            id: i.stages[0],
            label: w.GetText()
        }), b
    }

    function e(n) {
        return {
            productType: n.productType,
            categoryId: n.categoryId ? n.categoryId + "" : null,
            priceId: n.priceid == 0 ? "0" : n.priceid > 0 ? n.priceid + "" : "",
            minPrice: n.minprice || null,
            maxPrice: n.maxprice || null,
            areaId: n.areaid > 0 ? n.areaid + "" : "",
            minArea: n.minarea || null,
            maxArea: n.maxarea || null,
            cityCode: n.city || "",
            districtId: n.distr ? n.distr + "" : "",
            wardId: n.wardid ? `${n.wardid}` : null,
            streetId: n.streetid ? `${n.streetid}` : null,
            projectId: n.projid ? `${n.projid}` : null,
            roomId: n.roomid ? n.roomid + "" : null,
            directionId: n.directionid ? n.directionid + "" : null,
            mediaId: n.mediaid ? n.mediaid + "" : null,
            verificationId: n.verificationid ? n.verificationid + "" : null,
            keywork: n.keywork ? n.keywork + "" : ""
        }
    }

    function o(n) {
        let t = "",
            r = "";
        return n.searchingInfos.isMultipleSearch ? (n.searchingInfos.keywork && (t = `"${n.searchingInfos.keywork.replace(/-/g," ")}", `, r = `&quot;${n.searchingInfos.keywork.replace(/-/g," ")}&quot;, `), n.searchingInfos.productType && n.searchingInfos.productType.label && (t += n.searchingInfos.productType.label, r += n.searchingInfos.productType.label), n.searchingInfos.category && n.searchingInfos.category.label ? (t += ` ${n.searchingInfos.category.label.toLowerCase()}`, r += n.searchingInfos.category.tooltip ? ` ${n.searchingInfos.category.tooltip.toLowerCase()}` : ` ${n.searchingInfos.category.label.toLowerCase()}`) : (t += ` nhà đất`, r += ` nhà đất`), n.searchingInfos.location && n.searchingInfos.location.project && n.searchingInfos.location.project.label ? (t += ` tại ${n.searchingInfos.location.project.label}`, r += ` tại ${n.searchingInfos.location.project.label}`, t += `, ${n.searchingInfos.location.city.label}`, r += `, ${n.searchingInfos.location.city.label}`) : n.searchingInfos.location && n.searchingInfos.location.district && n.searchingInfos.location.district.label ? (t += ` tại ${n.searchingInfos.location.district.label}`, r += ` tại ${n.searchingInfos.location.district.label}`, t += `, ${n.searchingInfos.location.city.label}`, r += `, ${n.searchingInfos.location.city.label}`) : n.searchingInfos.location && n.searchingInfos.location.city && n.searchingInfos.location.city.label ? (t += ` tại ${n.searchingInfos.location.city.label}`, r += ` tại ${n.searchingInfos.location.city.label}`) : (t += " trên toàn quốc", r += " trên toàn quốc"), n.searchingInfos.price && n.searchingInfos.price.label && (t += `, giá ${n.searchingInfos.price.label}`, r += `, giá ${n.searchingInfos.price.label}`), n.searchingInfos.area && n.searchingInfos.area.label && (t += `, diện tích ${n.searchingInfos.area.label}`, r += `, diện tích ${n.searchingInfos.area.label}`)) : (n.searchingInfos.productType && n.searchingInfos.productType.label && (t += n.searchingInfos.productType.label, r += n.searchingInfos.productType.label), n.searchingInfos.category && n.searchingInfos.category.label ? (t += ` ${n.searchingInfos.category.label.toLowerCase()}`, r += ` ${n.searchingInfos.category.label.toLowerCase()}`) : (t += ` BĐS`, r += ` BĐS`), n.searchingInfos.location && n.searchingInfos.location.project && n.searchingInfos.location.project.label ? (t += `, ${n.searchingInfos.location.project.label}`, r += `, ${n.searchingInfos.location.project.label}`, t += `, ${n.searchingInfos.location.city.label}`, r += `, ${n.searchingInfos.location.city.label}`) : n.searchingInfos.location && n.searchingInfos.location.street && n.searchingInfos.location.street.label ? (t += `, ${n.searchingInfos.location.street.label}`, r += `, ${n.searchingInfos.location.street.label}`, t += `, ${n.searchingInfos.location.city.label}`, r += `, ${n.searchingInfos.location.city.label}`) : n.searchingInfos.location && n.searchingInfos.location.ward && n.searchingInfos.location.ward.label ? (t += `, ${n.searchingInfos.location.ward.label}`, r += `, ${n.searchingInfos.location.ward.label}`, t += `, ${n.searchingInfos.location.city.label}`, r += `, ${n.searchingInfos.location.city.label}`) : n.searchingInfos.location && n.searchingInfos.location.district && n.searchingInfos.location.district.label ? (t += `, ${n.searchingInfos.location.district.label}`, r += `, ${n.searchingInfos.location.district.label}`, t += `, ${n.searchingInfos.location.city.label}`, r += `, ${n.searchingInfos.location.city.label}`) : n.searchingInfos.location && n.searchingInfos.location.city && n.searchingInfos.location.city.label ? (t += `, ${n.searchingInfos.location.city.label}`, r += `, ${n.searchingInfos.location.city.label}`) : (t += " trên toàn quốc", r += " trên toàn quốc"), n.searchingInfos.keywork && n.searchingInfos.keywork != "undefined" && (n.searchingInfos.location || n.searchingInfos.category ? (t = `"${n.searchingInfos.keywork.replace(/-/g," ")}", ${t}`, r = `&quot;${n.searchingInfos.keywork.replace(/-/g," ")}&quot;, ${r}`) : (t = `"${n.searchingInfos.keywork.replace(/-/g," ")}", ${n.searchingInfos.productType.label} BĐS`, r = `&quot;${n.searchingInfos.keywork.replace(/-/g," ")}&quot;, ${n.searchingInfos.productType.label} BĐS`)), n.searchingInfos.price && n.searchingInfos.price.label && (n.searchingInfos.price.label = i(n.searchingInfos.price.label), t += `, ${n.searchingInfos.price.label.charAt(0).toUpperCase()+n.searchingInfos.price.label.slice(1)}`, r += `, ${n.searchingInfos.price.label.charAt(0).toUpperCase()+n.searchingInfos.price.label.slice(1)}`), n.searchingInfos.area && n.searchingInfos.area.label && (n.searchingInfos.area.label = i(n.searchingInfos.area.label), t += `, ${n.searchingInfos.area.label.charAt(0).toUpperCase()+n.searchingInfos.area.label.slice(1)}`, r += `, ${n.searchingInfos.area.label.charAt(0).toUpperCase()+n.searchingInfos.area.label.slice(1)}`), n.searchingInfos.room && n.searchingInfos.room.label && (t += `, ${n.searchingInfos.room.label} phòng ngủ`, r += `, ${n.searchingInfos.room.label} phòng ngủ`), n.searchingInfos.direction && n.searchingInfos.direction.label && (t += `, Hướng ${n.searchingInfos.direction.label.toLowerCase()}`, r += `, Hướng ${n.searchingInfos.direction.label.toLowerCase()}`), n.searchingInfos.media && n.searchingInfos.media.label && (t += `, Tin có ${n.searchingInfos.media.label.charAt(0).toLowerCase()+n.searchingInfos.media.label.slice(1)}`, r += `, Tin có ${n.searchingInfos.media.label.charAt(0).toLowerCase()+n.searchingInfos.media.label.slice(1)}`), n.searchingInfos.verification && n.searchingInfos.verification.label && (t += `, Loại tin ${n.searchingInfos.verification.label.charAt(0).toLowerCase()+n.searchingInfos.verification.label.slice(1)}`, r += `, Loại tin ${n.searchingInfos.verification.label.charAt(0).toLowerCase()+n.searchingInfos.verification.label.slice(1)}`), n.searchingInfos.stage && n.searchingInfos.stage.label && (t += `, ${n.searchingInfos.stage.label.charAt(0).toUpperCase()+n.searchingInfos.stage.label.slice(1)}`, r += `, ${n.searchingInfos.stage.label.charAt(0).toUpperCase()+n.searchingInfos.stage.label.slice(1)}`)), {
            label: t,
            tooltip: r
        }
    }

    function i(n) {
        return n.indexOf("-") >= 0 && (n = `từ ${n}`, n = n.replace("-", "đến").trim()), n.indexOf("&gt;=") >= 0 && (n = n.replace("&gt;=", "từ").trim()), n.indexOf("&lt;") >= 0 && (n = n.replace("&lt;", "tối đa").trim()), n.indexOf("≥") >= 0 && (n = n.replace("≥", "từ").trim()), n.indexOf("<") >= 0 && (n = n.replace("<", "tối đa").trim()), n.indexOf(">") >= 0 && (n = n.replace(">", "từ").trim()), n.indexOf("≤") >= 0 && (n = n.replace("≤", "tối đa").trim()), n
    }

    function r(n) {
        switch (n) {
            case "Nhà đất bán":
                n = "Bán";
                break;
            case "Nhà đất cho thuê":
                n = "Thuê"
        }
        return n
    }
    this.IsMultipleSearch = t;
    this.ValidSearchingFilter = u;
    this.GetSearchingFilterCriteria = f;
    this.BuildTextDisplayItem = o;
    this.GetSuggestionHistoryInput = e;
    this.NormalizeProductTypeLabel = r
};