window.FrontEnd || (window.FrontEnd = {});
FrontEnd.BdsSelectController = function(n) {
    function l(t) {
        var i = t.currentTarget ? t.currentTarget.getAttribute("vl") : "";
        n.value = i;
        n.dispatchEvent(new CustomEvent("change", {
            bubbles: !0,
            detail: {
                data: {
                    changeFromClickOption: !0
                }
            }
        }));
        s()
    }

    function p() {
        u.classList.add(t.DROPDOWN_SHOW);
        i.querySelectorAll(`.mCSB_container`).length == 1 ? i.mCustomScrollbar() : i.mCustomScrollbar();
        window.scrollServices.disableScroll();
        setTimeout(function() {
            document.body.addEventListener("click", o)
        }, 10)
    }

    function o(n) {
        f.contains(n.target) ? (n.preventDefault(), n.stopPropagation()) : (s(), document.body.removeEventListener("click", o))
    }

    function s() {
        window.scrollServices.enableScroll();
        u.classList.remove(t.DROPDOWN_SHOW);
        document.body.removeEventListener("click", o)
    }

    function h(n, t) {
        return t || (t = {}), n && n.detail && n.detail.data && (t = n.detail.data), Promise.all(e.map(i => i(n, t)))
    }

    function w() {
        var t = n.value,
            u = i.querySelector(`[vl="${t}"]`) ? i.querySelector(`[vl="${t}"]`).innerHTML.trim() : "";
        u && (c.innerHTML = u);
        t && t != "0" ? r.classList.add("hasvalue") : r.classList.remove("hasvalue")
    }

    function b(n) {
        e.push(n)
    }

    function k() {
        return n.value
    }

    function a(r) {
        return new Promise(function(u) {
            var f = "";
            r ? (i.querySelectorAll(`.${t.OPTION}[vl="${r}"]`).length == 1 && (f = r), n.value = f, h().then(function() {
                u()
            })) : (n.value = null, h().then(function() {
                u()
            }))
        })
    }

    function v() {
        i.querySelectorAll(`.${t.OPTION}`).forEach(n => {
            n.addEventListener("click", l)
        })
    }

    function d(n, t = null) {
        i.querySelectorAll(`.mCSB_container`).length == 1 ? i.querySelector(`.mCSB_container`).innerHTML = n : i.innerHTML = n;
        a(t);
        v()
    }

    function g() {
        return c.innerHTML || ""
    }

    function y(n, t) {
        if (!n || n.nodeName == "HTML") return null;
        var i = n.parentElement;
        return i.classList.contains(t) ? i : i.id == t ? i : y(i, t)
    }
    var t = {
            CONTAINER: "js__bds-select-container",
            DROPDOWN: "js__bds-select-dropdown",
            BUTTON: "js__bds-select-button",
            BUTTON_CURRENT_TEXT: "js__bds-select-button-current-text",
            OPTION: "js__option",
            LIST: "js__bds-select-list",
            DROPDOWN_SHOW: "re__show"
        },
        f = y(n, t.CONTAINER),
        r = f.querySelector(`.${t.BUTTON}`),
        u = f.querySelector(`.${t.DROPDOWN}`),
        i = u.querySelector(`.${t.LIST}`),
        c = r.querySelector(`.${t.BUTTON_CURRENT_TEXT}`),
        e = [];
    (function() {
        r.addEventListener("click", function(n) {
            var i = n.target;
            !i || i.classList.contains("re__icon-close--sm") || i.classList.contains(t.RESET_BUTTON) || !!i.getParent(`.${t.RESET_BUTTON}`) || (u.classList.contains(t.DROPDOWN_SHOW) ? s() : p())
        });
        v();
        i.querySelectorAll(`.${t.OPTION}`).forEach(n => {
            n.addEventListener("click", l)
        });
        n.addEventListener("change", h);
        e.push(w)
    })();
    this.setValue = a;
    this.updateList = d;
    this.addChangeEvent = b;
    this.getValue = k;
    this.getTitle = g
};