window.FrontEnd || (window.FrontEnd = {});
FrontEnd.SearchingTrackingService = function() {
    function n(n) {
        return parseInt(n, 10)
    }

    function h(n) {
        return n === t ? "proj" : n === e ? "sell" : "rent"
    }

    function c(n) {
        var i = 0,
            u = r,
            f = {
                "1": [0, 30],
                "2": [30, 50],
                "3": [50, 80],
                "4": [80, 100],
                "5": [100, 150],
                "6": [150, 200],
                "7": [200, 250],
                "8": [250, 300],
                "9": [300, r],
                "10": [r, null]
            },
            t = f[n];
        return t && (i = t[0], u = t[1]), [i, u]
    }

    function l(n, i) {
        let h = 0,
            r = u;
        i === o && (r = 100);
        i === t && (r = 80);
        let f = {};
        i === e ? f = {
            "1": [0, 500],
            "2": [500, 800],
            "3": [800, 1e3],
            "4": [1e3, 2e3],
            "5": [2e3, 3e3],
            "6": [3e3, 5e3],
            "7": [5e3, 7e3],
            "8": [7e3, 1e4],
            "9": [1e4, 2e4],
            "10": [2e4, 3e4],
            "11": [3e4, 4e4],
            "12": [4e4, u],
            "13": [u, null]
        } : i === o ? f = {
            "1": [0, 1],
            "2": [1, 3],
            "3": [3, 5],
            "4": [5, 10],
            "5": [10, 40],
            "6": [40, 70],
            "7": [70, 100],
            "8": [100, null]
        } : i === t && (f = {
            "1": [0, 5],
            "2": [5, 10],
            "3": [10, 20],
            "4": [20, 35],
            "5": [35, 50],
            "6": [50, 80],
            "7": [80, null]
        });
        let s = f[n];
        return s && (h = s[0], r = s[1]), [h, r]
    }

    function a(r, u, e, o, s) {
        let v = n(r.productType);
        var a = {
            event: v === t ? "search-b2b" : "search",
            sesell: h(v)
        };
        if (v === t && u && (a.sesuggest = u), e && e !== "" && (a.sekwrd = e), r.category && r.category.ids && (a.secati = r.category.ids), r.city && r.city.code && (a.secity = r.city.code), r.locations && r.locations.length > 0) {
            let t = [],
                u = [],
                f = [],
                e = [];
            r.locations.forEach(r => {
                let o = r.id.includes("_") ? r.id.split("_") : [r.id],
                    s = n(r.locationType);
                s === i.DISTRICT ? t.push(n(o[0])) : s !== i.DISTRICT && o.length > 1 && t.push(n(o[1]));
                s === i.WARD && u.push(n(o[0]));
                s === i.STREET && f.push(n(o[0]));
                s === i.PROJECT && e.push(n(o[0]))
            });
            t.length > 0 && (a.sedist = t);
            u.length > 0 && (a.seward = u);
            f.length > 0 && (a.sestri = f);
            e.length > 0 && (a.seproi = e)
        }
        if (r.price && r.price.level) {
            let n = l(r.price.level, v);
            a.seprmi = n[0];
            a.seprma = n[1]
        } else r.price && (r.price.min || r.price.max) && (a.seprmi = r.price.min, a.seprma = r.price.max);
        if (r.area && r.area.level) {
            let n = c(r.area.level, v);
            a.searmi = n[0];
            a.searma = n[1]
        } else r.area && (r.area.min || r.area.max) && (a.searmi = r.area.min, a.searma = r.area.max);
        s && s.value && (a.sestage = s.value);
        o && o.value && (a.sesort = o.value);
        r.room && r.room.ids && (a.sebedr = r.room.ids);
        r.direction && r.direction.ids && (a.sedire = r.direction.ids);
        r.media && r.media.ids && (a.semedi = r.media.ids);
        r.verification && (a.severi = r.verification ? "1" : "0");
        f.AddDataLayer(a)
    }

    function v(n, t) {
        var i = {
            event: n
        };
        t && t.length > 0 && t.forEach(n => {
            n.label && n.data && (i[n.label] = n.data)
        });
        f.AddDataLayer(i)
    }
    const t = 351,
        e = 38,
        o = 49,
        r = 500,
        u = 6e4,
        i = {
            PROJECT: 5,
            DISTRICT: 3,
            WARD: 6,
            STREET: 2
        };
    var f;
    (function s() {
        window.CommonJS && window.CommonJS.Common ? f = new CommonJS.Common : setTimeout(function() {
            s()
        }, 100)
    })();
    this.PushTrackingDataLayer = a;
    this.SendTrackingDataLayer = v
};