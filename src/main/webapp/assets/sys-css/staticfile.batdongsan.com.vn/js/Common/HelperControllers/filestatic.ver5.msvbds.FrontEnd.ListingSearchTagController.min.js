window.FrontEnd || (window.FrontEnd = {});
FrontEnd.ListingSearchTagController = function(n) {
    function u(t) {
        return n.addEventListener("change", t)
    }

    function f() {
        return n.value
    }

    function e(r) {
        i.forEach(n => {
            n.querySelectorAll(`.${t.LIST_ITEM}`).forEach(n => {
                n.classList.remove(t.LIST_ITEM_SELECTED)
            })
        });
        n.value = r;
        n.dispatchEvent(new Event("change"))
    }

    function o() {
        var r = [],
            u = n.value + "";
        return u.split(";").sort().forEach(function(n) {
            i.forEach(i => {
                i.querySelectorAll(`.${t.LIST_ITEM}[data-value="${n}"]`).forEach(n => {
                    r.push(n.textContent.trim())
                })
            })
        }), r
    }

    function s() {
        return o().join(", ").trim()
    }
    var t = {
            CONTAINER: "js__listing-search-tag-container",
            LIST: "js__listing-search-tag-list",
            LIST_ITEM: "js__listing-search-tag-list-item",
            LIST_ITEM_SELECTED: "re__selected"
        },
        r = n.getParent(t.CONTAINER),
        i = r.querySelectorAll(`.${t.LIST}`);
    (function() {
        i.forEach(i => {
            i.querySelectorAll(`.${t.LIST_ITEM}`).forEach(i => {
                i.addEventListener("click", function(i) {
                    var f = i.currentTarget,
                        r = n.value + "",
                        u = f.getAttribute("data-value") + "",
                        e;
                    f.classList.contains(t.LIST_ITEM_SELECTED) ? `;${r}`.indexOf(`;${u}`) >= 0 && (e = r.split(";"), e = e.filter(n => n != u), n.value = e.join(";"), n.dispatchEvent(new Event("change")), f.classList.remove(t.LIST_ITEM_SELECTED)) : `;${r}`.indexOf(`;${u}`) == -1 && (r ? r += `;${u}` : r = u, n.value = r, n.dispatchEvent(new Event("change")), f.classList.add(t.LIST_ITEM_SELECTED))
                })
            })
        });
        var r = n.value + "";
        r.split(";").forEach(function(n) {
            i.forEach(i => {
                i.querySelectorAll(`.${t.LIST_ITEM}[data-value="${n}"]`).forEach(n => {
                    n.classList.add(t.LIST_ITEM_SELECTED)
                })
            })
        })
    })();
    this.GetValue = f;
    this.SetValue = e;
    this.AddChangeEvent = u;
    this.GetText = s
};